<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Batsmen Impact Visualization Host</title>
    <!-- Load Tailwind CSS for styling (as used in the component) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Load React, ReactDOM, and Babel -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel is crucial for translating the JSX in your script tag -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Optional: Basic body styling */
        body {
            margin: 0;
            padding: 0;
            background-color: #f7f7f7;
            min-height: 100vh;
        }
    </style>
</head>
<body>
    <!-- 1. The root element where React will render the component -->
    <div id="root">
        <!-- A loading message while React initializes -->
        <div class="text-center p-10 text-gray-500">Loading visualization...</div>
    </div>

    <!-- 2. The JSX component script -->
    <!-- IMPORTANT: Note the type="text/babel" which tells Babel to compile this JS/JSX -->
    <script type="text/babel">
        // --- START OF YOUR story.jsx CONTENT ---

        const { useState, useEffect, useMemo } = React;

        // Data parsed from the user's provided Python analysis
        // Note: Some scores were approximated or recalculated to match the formula: Average * ln(Runs)
        const rawData = [
            { name: "SR Tendulkar", start: 1989, end: 2013, runs: 15921, ave: 53.78, score: 520.3 },
            { name: "R Dravid", start: 1996, end: 2012, runs: 13265, ave: 52.63, score: 499.6 },
            { name: "SM Gavaskar", start: 1971, end: 1987, runs: 10122, ave: 51.12, score: 471.5 },
            { name: "V Sehwag", start: 2001, end: 2013, runs: 8503, ave: 49.43, score: 447.3 },
            { name: "V Kohli", start: 2011, end: 2025, runs: 9230, ave: 46.85, score: 427.8 },
            { name: "VVS Laxman", start: 1996, end: 2012, runs: 8781, ave: 45.97, score: 417.4 },
            { name: "M Azharuddin", start: 1984, end: 2000, runs: 6215, ave: 45.03, score: 393.3 },
            { name: "CA Pujara", start: 2010, end: 2023, runs: 7195, ave: 43.60, score: 387.2 },
            { name: "YBK Jaiswal", start: 2023, end: 2025, runs: 2511, ave: 49.23, score: 385.4 },
            { name: "SC Ganguly", start: 1996, end: 2008, runs: 7212, ave: 42.17, score: 374.6 },
            { name: "DB Vengsarkar", start: 1976, end: 1992, runs: 6868, ave: 42.13, score: 372.2 },
            { name: "VS Hazare", start: 1946, end: 1953, runs: 2192, ave: 47.65, score: 366.6 },
            { name: "GR Viswanath", start: 1969, end: 1983, runs: 6080, ave: 41.93, score: 365.3 },
            { name: "M Amarnath", start: 1969, end: 1988, runs: 4378, ave: 42.50, score: 356.4 },
            { name: "RR Pant", start: 2018, end: 2025, runs: 3476, ave: 42.91, score: 349.8 },
            { name: "G Gambhir", start: 2004, end: 2016, runs: 4154, ave: 41.95, score: 349.5 },
            { name: "PR Umrigar", start: 1948, end: 1962, runs: 3631, ave: 42.22, score: 346.1 },
            { name: "RG Sharma", start: 2013, end: 2024, runs: 4301, ave: 40.57, score: 339.4 },
        ];

        // Sort by Score descending
        const data = rawData.sort((a, b) => b.score - a.score);

        const App = () => {
            const [hoveredPlayer, setHoveredPlayer] = useState(null);

            // Chart Dimensions
            const margin = { top: 40, right: 120, bottom: 40, left: 60 };
            const height = 600;
            const width = 800; // Base width, responsive via viewBox
            const chartHeight = height - margin.top - margin.bottom;
            const chartWidth = width - margin.left - margin.right;

            // Scales
            const minYear = 1945;
            const maxYear = 2030;
            const minScore = 320;
            const maxScore = 540;

            const getX = (year) => ((year - minYear) / (maxYear - minYear)) * chartWidth + margin.left;
            const getY = (score) => chartHeight - ((score - minScore) / (maxScore - minScore)) * chartHeight + margin.top;

            const formatScore = (n) => n.toFixed(1);

            // Custom styles for NYT/Merriweather look
            const textStyles = {
                fontFamily: 'Merriweather, serif'
            };
            const titleStyles = {
                fontFamily: 'Libre Franklin, sans-serif'
            };

            return (
                <div className="max-w-4xl mx-auto p-4 md:p-8 bg-[#fdfdfd] min-h-screen font-sans border border-gray-100 shadow-sm">
                    <header className="mb-8 border-b border-gray-200 pb-6">
                        <h1 className="text-3xl md:text-4xl font-bold text-gray-900 mb-2" style={titleStyles}>
                            The Architecture of Runs
                        </h1>
                        <p className="text-gray-600 text-lg md:text-xl font-light leading-relaxed" style={textStyles}>
                            Evaluating India’s greatest Test batsmen by balancing <strong className="text-gray-900">career longevity</strong> with <strong className="text-gray-900">batting average</strong>.
                        </p>
                        <div className="mt-4 flex flex-col md:flex-row gap-4 text-sm text-gray-500 font-sans">
                            <span className="bg-gray-100 px-2 py-1 rounded">Metric: Average × ln(Runs)</span>
                            <span className="flex items-center gap-1"><div className="w-2 h-2 rounded-full bg-red-600"></div> Active in 2025</span>
                        </div>
                    </header>

                    <div className="relative w-full aspect-[4/3] md:aspect-[16/9] overflow-hidden">
                        <svg viewBox={`0 0 ${width} ${height}`} className="w-full h-full overflow-visible">

                            {/* Gridlines - Y Axis */}
                            {[350, 400, 450, 500].map(score => (
                                <g key={score}>
                                    <line
                                        x1={margin.left}
                                        x2={width - margin.right}
                                        y1={getY(score)}
                                        y2={getY(score)}
                                        stroke="#e5e7eb"
                                        strokeWidth="1"
                                        strokeDasharray="4 4"
                                    />
                                    <text
                                        x={margin.left - 10}
                                        y={getY(score)}
                                        dy="4"
                                        textAnchor="end"
                                        className="text-[10px] fill-gray-400 font-sans"
                                    >
                                        {score}
                                    </text>
                                </g>
                            ))}

                            {/* Gridlines - X Axis (Decades) */}
                            {[1950, 1960, 1970, 1980, 1990, 2000, 2010, 2020, 2030].map(year => (
                                <g key={year}>
                                    <line
                                        x1={getX(year)}
                                        x2={getX(year)}
                                        y1={margin.top}
                                        y2={height - margin.bottom}
                                        stroke="#e5e7eb"
                                        strokeWidth="1"
                                    />
                                    <text
                                        x={getX(year)}
                                        y={height - margin.bottom + 20}
                                        textAnchor="middle"
                                        className="text-[10px] fill-gray-400 font-sans font-bold"
                                    >
                                        {year}
                                    </text>
                                </g>
                            ))}

                            {/* Axis Labels */}
                            <text x={width/2} y={height - 5} textAnchor="middle" className="text-xs uppercase tracking-widest fill-gray-500 font-semibold" style={titleStyles}>Active Years</text>
                            <text transform={`rotate(-90, 20, ${height/2})`} x={20} y={height/2} textAnchor="middle" className="text-xs uppercase tracking-widest fill-gray-500 font-semibold" style={titleStyles}>Impact Index</text>

                            {/* Data Lines */}
                            {data.map((player) => {
                                const yPos = getY(player.score);
                                const xStart = getX(player.start);
                                const xEnd = getX(player.end);
                                const isHovered = hoveredPlayer === player.name;
                                const isActive = player.end >= 2025;

                                return (
                                    <g
                                        key={player.name}
                                        onMouseEnter={() => setHoveredPlayer(player.name)}
                                        onMouseLeave={() => setHoveredPlayer(null)}
                                        className="cursor-pointer transition-opacity duration-300"
                                        style={{ opacity: hoveredPlayer && !isHovered ? 0.2 : 1 }}
                                    >
                                        {/* Interaction Zone (thicker invisible line) */}
                                        <line
                                            x1={xStart} x2={xEnd} y1={yPos} y2={yPos}
                                            stroke="transparent" strokeWidth="20"
                                        />

                                        {/* Visible Line */}
                                        <line
                                            x1={xStart}
                                            x2={xEnd}
                                            y1={yPos}
                                            y2={yPos}
                                            stroke={isActive ? "#dc2626" : (isHovered ? "#1f2937" : "#4b5563")}
                                            strokeWidth={isHovered ? 4 : 2}
                                            strokeLinecap="round"
                                        />

                                        {/* Start Dot */}
                                        <circle cx={xStart} cy={yPos} r={isHovered ? 4 : 2} fill={isActive ? "#dc2626" : "#4b5563"} />
                                        {/* End Dot */}
                                        <circle cx={xEnd} cy={yPos} r={isHovered ? 4 : 2} fill={isActive ? "#dc2626" : "#4b5563"} />

                                        {/* Label */}
                                        <text
                                            x={xEnd + 8}
                                            y={yPos}
                                            dy="4"
                                            className={`font-sans text-[11px] md:text-[13px] ${isHovered ? 'font-bold fill-black' : 'font-normal fill-gray-600'}`}
                                        >
                                            {player.name} {isHovered && `(${formatScore(player.score)})`}
                                        </text>

                                        {/* Tooltip visualization (Only when hovered) */}
                                        {isHovered && (
                                            <foreignObject x={xStart} y={yPos - 85} width="200" height="80" style={{ overflow: 'visible' }}>
                                                <div className="bg-white/95 backdrop-blur-sm border border-gray-200 shadow-lg p-3 rounded text-xs z-50 pointer-events-none" style={{ transform: 'translateY(-100%)' }}>
                                                    <div className="font-bold text-gray-900 text-sm mb-1">{player.name}</div>
                                                    <div className="grid grid-cols-2 gap-x-2 gap-y-1 text-gray-600">
                                                        <span>Runs:</span> <span className="font-mono text-gray-900">{player.runs.toLocaleString()}</span>
                                                        <span>Avg:</span> <span className="font-mono text-gray-900">{player.ave}</span>
                                                        <span>Span:</span> <span className="font-mono text-gray-900">{player.start}-{player.end}</span>
                                                    </div>
                                                </div>
                                            </foreignObject>
                                        )}
                                    </g>
                                );
                            })}

                        </svg>
                    </div>

                    <div className="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8 text-sm text-gray-700 leading-relaxed font-serif border-t border-gray-200 pt-6">
                        <div>
                            <h3 className="font-bold text-gray-900 mb-2 uppercase tracking-wide text-xs font-sans" style={titleStyles}>The Metric</h3>
                            <p style={textStyles}>
                                The <strong>Impact Index</strong> is calculated as <code className="bg-gray-100 px-1 py-0.5 rounded text-xs">Average × ln(Runs)</code>.
                                This composite score rewards high averages but heavily weights career longevity. It penalizes "flash in the pan" brilliance while acknowledging that maintaining a 50+ average over 15,000 runs is exponentially harder than over 2,000 runs.
                            </p>
                        </div>
                        <div>
                            <h3 className="font-bold text-gray-900 mb-2 uppercase tracking-wide text-xs font-sans" style={titleStyles}>The Findings</h3>
                            <p style={textStyles}>
                                <strong>Sachin Tendulkar</strong> remains the outlier, combining massive volume with an elite average. <strong>Rahul Dravid</strong> and <strong>Sunil Gavaskar</strong> follow, highlighting their endurance. Active players like <strong>Kohli</strong> and <strong>Jaiswal</strong> show where the modern era stands—Kohli cementing his legacy, and Jaiswal (despite a high average) needing years of accumulation to climb the vertical axis.
                            </p>
                        </div>
                    </div>
                    <div className="mt-8 text-[10px] text-gray-400 font-sans text-center">
                        Data Source: ESPNcricinfo Statsguru (Test Matches) • Analysis generated via Python
                    </div>
                </div>
            );
        };

        // 3. Render the App component into the root element
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);

        // --- END OF YOUR story.jsx CONTENT ---
    </script>
</body>
</html>
